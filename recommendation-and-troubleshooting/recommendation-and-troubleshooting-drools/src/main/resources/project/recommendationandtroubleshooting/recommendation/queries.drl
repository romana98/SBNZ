package project;

import project.recommendationandtroubleshooting.model.recommendation.Configuration;
import project.recommendationandtroubleshooting.model.recommendation.InputRecommendation;
import project.recommendationandtroubleshooting.model.recommendation.ConfigurationUsageType;
import project.recommendationandtroubleshooting.model.recommendation.ConfigurationCharacteristicType;
import project.recommendationandtroubleshooting.model.recommendation.Budget;
import project.recommendationandtroubleshooting.model.recommendation.Mobility;
import project.recommendationandtroubleshooting.model.recommendation.Output;
import project.recommendationandtroubleshooting.model.recommendation.Favorite;
import project.recommendationandtroubleshooting.enums.ConfigurationType
import project.recommendationandtroubleshooting.model.User;

import java.util.List;

query "Average rating"(Long configurationId)
	$c: Configuration(id == configurationId);
	$average: Number() from accumulate (
		Rating($rate: rate) from $c.getRatings(),
		avg($rate));
end;


query "Number of users by rate"(Long configurationId)
	$c: Configuration(id == configurationId);
	$one: Number() from accumulate (
		Rating(rate == 1) from $c.getRatings(),
		count(1));
	$two: Number() from accumulate (
		Rating(rate == 2) from $c.getRatings(),
		count(1));
	$three: Number() from accumulate (
		Rating(rate == 3) from $c.getRatings(),
		count(1));
	$four: Number() from accumulate (
		Rating(rate == 4) from $c.getRatings(),
		count(1));
	$five: Number() from accumulate (
		Rating(rate == 5) from $c.getRatings(),
		count(1));
end;


//fali broj korisnika koji su ocijenili konfiguraciju - to je samo duzina liste ratings?
