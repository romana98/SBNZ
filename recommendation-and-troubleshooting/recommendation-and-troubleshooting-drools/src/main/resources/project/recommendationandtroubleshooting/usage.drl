package project.recommendationandtroubleshooting.recommendation;
import project.recommendationandtroubleshooting.model.recommendation.InputRequirements;
import project.recommendationandtroubleshooting.model.recommendation.Recommendations;
import project.recommendationandtroubleshooting.model.recommendation.ConfigurationUsageTypeRequirements;
import project.recommendationandtroubleshooting.model.recommendation.Configuration;
import project.recommendationandtroubleshooting.model.recommendation.SetString;
import java.util.List;

query checkIfSetIsEmpty(Set<String> reqCPU, boolean $notEmmptyCPU)
	$notEmmptyCPU: eval(reqCPU.size() != 0)
end;

query "getConfigurationsByUsage" getConfigurationByUsage(Set<String> reqCPU, Set<String> reqGPU, Set<String> reqRAM, Set<String> reqOS, Set<String> reqPSU, 
		Set<String> reqDiscType,
        Set<String> reqDiscSize, Set<String> reqMotherboard, Set<String> reqScreenSize,
        Set<String> reqScreenResolution, Set<String> reqMusicCard,
        Set<String> reqTouchscreen, Set<String> reqMicrophone, Set<String> reqCamera, Set<String> reqErgonomic)
    ?checkIfSetIsEmpty(reqCPU, $notEmmptyCPU;)
    //?checkIfSetIsEmpty($reqGPU, $notEmmptyGPU;)
    //?checkIfSetIsEmpty($reqRAM, $notEmmptyRAM;)
    //?checkIfSetIsEmpty($reqOS, $notEmmptyOS;)
    //?checkIfSetIsEmpty($reqPSU, $notEmmptyPSU;)
    //?checkIfSetIsEmpty($reqDiscType, $notEmmptyDiscType;)
    //?checkIfSetIsEmpty($reqDiscSize, $notEmmptyDiscSize;)
    //?checkIfSetIsEmpty($reqMotherboard, $notEmmptyMotherboard;)
    //?checkIfSetIsEmpty($reqScreenSize, $notEmmptyScreenSize;)
    //?checkIfSetIsEmpty($reqScreenResolution, $notEmmptyScreenResolution;)
    //?checkIfSetIsEmpty($reqMusicCard, $notEmmptyMusicCard;)
    //?checkIfSetIsEmpty($reqTouchscreen, $notEmmptyTouchscreen;)
    //?checkIfSetIsEmpty($reqMicrophone, $notEmmptyMicrophone;)
    //?checkIfSetIsEmpty($reqCamera, $notEmmptyCamera;)
    //?checkIfSetIsEmpty($reqErgonomic, $notEnotEmmptyErgonomicmpty;)
	$configuraion: Configuration(considered == true && 
			((CPU not memberOf reqCPU.getSetString() && $notEmmptyCPU)
    		//||
            //(GPU not memberOf reqGPU && $notEmmptyGPU)
            //||
            //(RAM not memberOf reqRAM && $notEmmptyRAM)
            //||
            //(OS not memberOf reqOS && $notEmmptyOS)
            //||
            //(PSU not memberOf reqPSU && $notEmmptyPSU)
            //||
            //(discType not memberOf reqDiscType && $notEmmptyDiscType)
            //||
            //(discSize not memberOf reqDiscSize && $notEmmptyDiscSize)
            //||
            //(motherboard not memberOf reqMotherboard && $notEmmptyMotherboard)
            //||
            //(screenSize not memberOf reqScreenSize && $notEmmptyScreenSize)
            //||
            //(screenResolution not memberOf reqScreenResolution && $notEmmptyScreenResolution)
            //||
            //(musicCard not memberOf reqMusicCard && $notEmmptyMusicCard)
            //||
            //(touchscreen not memberOf reqTouchScreen && $notEmmptyTouchscreen)
            //||
            //(microphone memberOf reqMicrophone && $notEmmptyMicrophone)
            //||
            //(camera not memberOf reqCamera && $notEmmptyCamera)
            //||
            //(ergonomic not memberOf reqEgronomic && $notEmmptyErgonomic)
            ))
end;

rule "Usage"
        agenda-group "recommendation"
	    salience (3)
    when
        $r: Recommendations(configurations.isEmpty())
        $i: InputRequirements($usageType: configurationUsageType);
        $usage: String() from $usageType.getUsage();
        $requirements: ConfigurationUsageTypeRequirements($u: usage, $u.getUsage() == $usage,
        $reqCPU: CPU, $reqGPU: GPU, $reqRAM: RAM, $reqOS: OS, $reqPSU: PSU, $reqDiscType: discType,
        $reqDiscSize: discSize, $reqMotherboard: motherboard, $reqScreenSize: screenSize,
        $reqScreenResolution: screenResolution, $reqMusicCard: musicCard,
        $reqTouchScreen: touchscreen, $reqMicrophone: microphone, $reqCamera: camera, $reqEgronomic: ergonomic);

		$c: Configuration( $configurationId: id )
        ?getConfigurationByUsage($reqCPU, $reqGPU, $reqRAM, $reqOS, $reqPSU, $reqDiscType,
        $reqDiscSize, $reqMotherboard, $reqScreenSize,
        $reqScreenResolution, $reqMusicCard,
        $reqTouchScreen, $reqMicrophone, $reqCamera, $reqEgronomic)
    then
        System.out.println("Rule: Usage");
    	modify($c) { setConsidered(false) }
end





/*
package project.recommendationandtroubleshooting.recommendation;
import project.recommendationandtroubleshooting.model.recommendation.InputRequirements;
import project.recommendationandtroubleshooting.model.recommendation.Recommendations;
import project.recommendationandtroubleshooting.model.recommendation.ConfigurationUsageTypeRequirements;
import project.recommendationandtroubleshooting.model.recommendation.Configuration;
import java.util.List;

rule "Usage"
        agenda-group "recommendation"
	    salience (3)
    when
        $r: Recommendations(configurations.isEmpty())
        $i: InputRequirements($usageType: configurationUsageType);
        $usage: String() from $usageType.getUsage();
        $requirements: ConfigurationUsageTypeRequirements($u: usage, $u.getUsage() == $usage,
        $reqCPU: CPU, $reqGPU: GPU, $reqRAM: RAM, $reqOS: OS, $reqPSU: PSU, $reqDiscType: discType,
        $reqDiscSize: discSize, $reqMotherboard: motherboard, $reqScreenSize: screenSize,
        $reqScreenResolution: screenResolution, $reqMusicCard: musicCard,
        $reqTouchScreen: touchscreen, $reqMicrophone: microphone, $reqCamera: camera, $reqEgronomic: ergonomic);

        $configurations: List() from collect(Configuration(considered == true));
        $c: Configuration(
    		(CPU not memberOf $reqCPU && !$reqCPU.isEmpty())
    		||
            (GPU not memberOf $reqGPU && !$reqGPU.isEmpty())
            ||
            (RAM not memberOf $reqRAM && !$reqRAM.isEmpty())
            ||
            (OS not memberOf $reqOS && !$reqOS.isEmpty())
            ||
            (PSU not memberOf $reqPSU && !$reqPSU.isEmpty())
            ||
            (discType not memberOf $reqDiscType && !$reqDiscType.isEmpty())
            ||
            (discSize not memberOf $reqDiscSize && !$reqDiscSize.isEmpty())
            ||
            (motherboard not memberOf $reqMotherboard && !$reqMotherboard.isEmpty())
            ||
            (screenSize not memberOf $reqScreenSize && !$reqScreenSize.isEmpty())
            ||
            (screenResolution not memberOf $reqScreenResolution && !$reqScreenResolution.isEmpty())
            ||
            (musicCard not memberOf $reqMusicCard && !$reqMusicCard.isEmpty())
            ||
            (touchscreen not memberOf $reqTouchScreen && !$reqTouchScreen.isEmpty())
            ||
            (microphone memberOf $reqMicrophone && !$reqMicrophone.isEmpty())
            ||
            (camera not memberOf $reqCamera && !$reqCamera.isEmpty())
            ||
            (ergonomic not memberOf $reqEgronomic && !$reqEgronomic.isEmpty())
    	)
    	from $configurations
    then
        System.out.println("Rule: Usage");
    	modify($c) { setConsidered(false) }
end
*/




