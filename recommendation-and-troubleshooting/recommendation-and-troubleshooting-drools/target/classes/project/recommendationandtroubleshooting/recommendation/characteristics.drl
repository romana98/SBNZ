package project.recommendationandtroubleshooting.recommendation;

import project.recommendationandtroubleshooting.model.recommendation.InputRequirements;
import project.recommendationandtroubleshooting.model.recommendation.Configuration;
import project.recommendationandtroubleshooting.model.recommendation.InputRequirements;
import project.recommendationandtroubleshooting.model.recommendation.ConfigurationUsageType;
import project.recommendationandtroubleshooting.model.recommendation.ConfigurationCharacteristicType;
import project.recommendationandtroubleshooting.model.recommendation.Budget;
import project.recommendationandtroubleshooting.model.recommendation.Mobility;
import project.recommendationandtroubleshooting.model.recommendation.ConfigurationUsageTypeRequirements;
import project.recommendationandtroubleshooting.model.recommendation.ConfigurationCharacteristicTypeRequirements;
import project.recommendationandtroubleshooting.model.recommendation.Recommendations;
import java.util.List;

rule "Characteristics"
        agenda-group "recommendation"
        salience (2)
    when
        $r: Recommendations(configurations.empty)
        $i: InputRequirements($configurationCharacteristicType: configurationCharacteristicType);
        $cct: ConfigurationCharacteristicType($characteristic: characteristic) from $configurationCharacteristicType;

        $requirements: ConfigurationCharacteristicTypeRequirements($char: characteristic, $char.getCharacteristic() == $characteristic,
        $reqCPU: CPU, $reqGPU: GPU, $reqRAM: RAM, $reqOS: OS, $reqPSU: PSU, $reqDiscType: discType,
                $reqDiscSize: discSize, $reqMotherboard: motherboard, $reqScreenSize: screenSize,
                $reqScreenResolution: screenResolution, $reqMusicCard: musicCard,
                $reqTouchScreen: touchscreen, $reqMicrophone: microphone, $reqCamera: camera, $reqEgronomic: ergonomic);

        $configurations: List() from collect(Configuration(considered == true))
        $c: Configuration(
           (CPU not memberOf $reqCPU && !$reqCPU.isEmpty())
           ||
           (GPU not memberOf $reqGPU && !$reqGPU.isEmpty())
           ||
           (RAM not memberOf $reqRAM && !$reqRAM.isEmpty())
           ||
           (OS not memberOf $reqOS && !$reqOS.isEmpty())
           ||
           (PSU not memberOf $reqPSU && !$reqPSU.isEmpty())
           ||
           (discType not memberOf $reqDiscType && !$reqDiscType.isEmpty())
           ||
           (discSize not memberOf $reqDiscSize && !$reqDiscSize.isEmpty())
           ||
           (motherboard not memberOf $reqMotherboard && !$reqMotherboard.isEmpty())
           ||
           (screenSize not memberOf $reqScreenSize && !$reqScreenSize.isEmpty())
           ||
           (screenResolution not memberOf $reqScreenResolution && !$reqScreenResolution.isEmpty())
           ||
           (musicCard not memberOf $reqMusicCard && !$reqMusicCard.isEmpty())
           ||
           (touchscreen not memberOf $reqTouchScreen && !$reqTouchScreen.isEmpty())
           ||
           (microphone not memberOf $reqMicrophone && !$reqMicrophone.isEmpty())
           ||
           (camera not memberOf $reqCamera && !$reqCamera.isEmpty())
           ||
           (ergonomic not memberOf $reqEgronomic && !$reqEgronomic.isEmpty())
        )
        from $configurations
    then
        System.out.println("Rule: Characteristics");
        modify($c) { setConsidered(false) }
end

/*
rule "Characteristics"
	salience (7)
    when
        $i: InputRecommendation($configurationCharacteristicType: configurationCharacteristicType)
        $ch: ConfigurationCharacteristicType($characteristic: characteristic) from $configurationCharacteristicType
        $o: Output(recommendedConfigurations.isEmpty(), usage == "done", characteristics == null, budget == "done", type == "done")
        $requirements: ConfigurationCharacteristicTypeRequirements(characteristic.getCharacteristic() == $characteristic)
        $configurations: List() from collect(Configuration(considered == true))
        Configuration(
    		$c:this, this.getCPU() not memberOf $requirements.getCPU() && !$requirements.getCPU().isEmpty() || this.getGPU() not memberOf $requirements.getGPU() && !$requirements.getGPU().isEmpty() || this.getRAM() not memberOf $requirements.getRAM() && !$requirements.getRAM().isEmpty() || this.getOS() not memberOf $requirements.getOS() && !$requirements.getOS().isEmpty() || this.getPSU() not memberOf $requirements.getPSU() && !$requirements.getPSU().isEmpty() || this.getDiscType() not memberOf $requirements.getDiscType() && !$requirements.getDiscType().isEmpty() || this.getDiscSize() not memberOf $requirements.getDiscSize() && !$requirements.getDiscSize().isEmpty() || this.getMotherboard() not memberOf $requirements.getMotherboard() && !$requirements.getMotherboard().isEmpty() || this.getScreenSize() not memberOf $requirements.getScreenSize() && !$requirements.getScreenSize().isEmpty() || this.getScreenResolution() not memberOf $requirements.getScreenResolution() && !$requirements.getScreenResolution().isEmpty() || this.getMusicCard() not memberOf $requirements.getMusicCard() && !$requirements.getMusicCard().isEmpty() || this.isTouchscreen() not memberOf $requirements.getTouchscreen() && !$requirements.getTouchscreen().isEmpty() || this.isMicrophone() not memberOf $requirements.getMicrophone() && !$requirements.getMicrophone().isEmpty() || this.isCamera() not memberOf $requirements.getCamera() && !$requirements.getCamera().isEmpty() || this.isErgonomic() not memberOf $requirements.getErgonomic() && !$requirements.getErgonomic().isEmpty()
    	)
    	from $configurations
    then
    	modify($o) { setCharacteristics("done") }
    	modify($c) { setConsidered(false) }
end

rule "CharacteristicsPass"
	salience (7)
    when
        $i: InputRecommendation($configurationCharacteristicType: configurationCharacteristicType)
        $ch: ConfigurationCharacteristicType($characteristic: characteristic) from $configurationCharacteristicType
        $o: Output(recommendedConfigurations.isEmpty(), usage == "done", characteristics == null, budget == "done", type == "done")
        $requirements: ConfigurationCharacteristicTypeRequirements(characteristic.getCharacteristic() == $characteristic)
        $configurations: List() from collect(Configuration(considered == true))
        Configuration(
    		$c:this, this.getCPU() memberOf $requirements.getCPU() || $requirements.getCPU().isEmpty(), this.getGPU() memberOf $requirements.getGPU() || $requirements.getGPU().isEmpty(), this.getRAM() memberOf $requirements.getRAM() || $requirements.getRAM().isEmpty(), this.getOS() memberOf $requirements.getOS() || $requirements.getOS().isEmpty(), this.getPSU() memberOf $requirements.getPSU() || $requirements.getPSU().isEmpty(), this.getDiscType() memberOf $requirements.getDiscType() || $requirements.getDiscType().isEmpty(), this.getDiscSize() memberOf $requirements.getDiscSize() || $requirements.getDiscSize().isEmpty(), this.getMotherboard() memberOf $requirements.getMotherboard() || $requirements.getMotherboard().isEmpty(), this.getScreenSize() memberOf $requirements.getScreenSize() || $requirements.getScreenSize().isEmpty(), this.getScreenResolution() memberOf $requirements.getScreenResolution() || $requirements.getScreenResolution().isEmpty(), this.getMusicCard() memberOf $requirements.getMusicCard() || $requirements.getMusicCard().isEmpty(), this.isTouchscreen() memberOf $requirements.getTouchscreen() || $requirements.getTouchscreen().isEmpty(), this.isMicrophone() memberOf $requirements.getMicrophone() || $requirements.getMicrophone().isEmpty(), this.isCamera() memberOf $requirements.getCamera() || $requirements.getCamera().isEmpty(), this.isErgonomic() memberOf $requirements.getErgonomic() || $requirements.getErgonomic().isEmpty()
    	)
    	from $configurations
    then
    	modify($o) { setCharacteristics("done") }
end
*/
