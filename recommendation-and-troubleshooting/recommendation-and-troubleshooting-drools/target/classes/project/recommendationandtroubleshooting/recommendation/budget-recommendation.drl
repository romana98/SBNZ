package project;

import project.recommendationandtroubleshooting.model.recommendation.Configuration
import project.recommendationandtroubleshooting.model.recommendation.InputRecommendation;
import project.recommendationandtroubleshooting.model.recommendation.ConfigurationUsageType;
import project.recommendationandtroubleshooting.model.recommendation.ConfigurationCharacteristicType;
import project.recommendationandtroubleshooting.model.recommendation.Budget;
import project.recommendationandtroubleshooting.model.recommendation.Mobility;
import project.recommendationandtroubleshooting.model.recommendation.Output;
import project.recommendationandtroubleshooting.enums.ConfigurationType;
import java.util.List;


rule "Budget" 
	salience (10) 
    when
        $i: InputRecommendation($max: budget.getMaxPrice(), $min: budget.getMinPrice())
        $o: Output(recommendedConfigurations.isEmpty(), usage == null, characteristics == null, budget == null, type == null)
        $configurations: List() from collect(Configuration(considered == true))
        $c: Configuration(price < $min || price > $max) from $configurations
    then
    	modify($c) { setConsidered(false) }
    	modify($o) { setBudget("done") }
end

rule "BudgetPass" 
	salience (10) 
    when
        $i: InputRecommendation($max: budget.getMaxPrice(), $min: budget.getMinPrice())
        $o: Output(recommendedConfigurations.isEmpty(), usage == null, characteristics == null, budget == null, type == null)
        $configurations: List() from collect(Configuration(considered == true))
        $c: Configuration(price >= $min && price <= $max) from $configurations
    then
    	modify($o) { setBudget("done") }
end

