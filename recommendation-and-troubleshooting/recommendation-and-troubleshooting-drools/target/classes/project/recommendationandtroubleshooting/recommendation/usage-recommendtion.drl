package project;

import project.recommendationandtroubleshooting.model.recommendation.Configuration;
import project.recommendationandtroubleshooting.model.recommendation.InputRecommendation;
import project.recommendationandtroubleshooting.model.recommendation.ConfigurationUsageType;
import project.recommendationandtroubleshooting.model.recommendation.ConfigurationCharacteristicType;
import project.recommendationandtroubleshooting.model.recommendation.Budget;
import project.recommendationandtroubleshooting.model.recommendation.Mobility;
import project.recommendationandtroubleshooting.model.recommendation.Output;
import project.recommendationandtroubleshooting.model.recommendation.ConfigurationUsageTypeRequirements;
import project.recommendationandtroubleshooting.model.recommendation.ConfigurationCharacteristicTypeRequirements;
import java.util.List;


rule "Usage" 
	salience (8) 
    when
        $i: InputRecommendation($usage: configurationUsageType.getUsage())
        $o: Output(recommendedConfigurations.isEmpty(), usage == null, characteristics == null, budget == "done", type == "done")
        $requirements: ConfigurationUsageTypeRequirements(usage.getUsage() == $usage)
        $configurations: List() from collect(Configuration(considered == true))
        Configuration(
    		$c:this, this.getCPU() not memberOf $requirements.getCPU() && !$requirements.getCPU().isEmpty() || this.getGPU() not memberOf $requirements.getGPU() && !$requirements.getGPU().isEmpty() || this.getRAM() not memberOf $requirements.getRAM() && !$requirements.getRAM().isEmpty() || this.getOS() not memberOf $requirements.getOS() && !$requirements.getOS().isEmpty() || this.getPSU() not memberOf $requirements.getPSU() && !$requirements.getPSU().isEmpty() || this.getDiscType() not memberOf $requirements.getDiscType() && !$requirements.getDiscType().isEmpty() || this.getDiscSize() not memberOf $requirements.getDiscSize() && !$requirements.getDiscSize().isEmpty() || this.getMotherboard() not memberOf $requirements.getMotherboard() && !$requirements.getMotherboard().isEmpty() || this.getScreenSize() not memberOf $requirements.getScreenSize() && !$requirements.getScreenSize().isEmpty() || this.getScreenResolution() not memberOf $requirements.getScreenResolution() && !$requirements.getScreenResolution().isEmpty() || this.getMusicCard() not memberOf $requirements.getMusicCard() && !$requirements.getMusicCard().isEmpty() || this.isTouchscreen() not memberOf $requirements.getTouchscreen() && !$requirements.getTouchscreen().isEmpty() || this.isMicrophone() not memberOf $requirements.getMicrophone() && !$requirements.getMicrophone().isEmpty() || this.isCamera() not memberOf $requirements.getCamera() && !$requirements.getCamera().isEmpty() || this.isErgonomic() not memberOf $requirements.getErgonomic() && !$requirements.getErgonomic().isEmpty()
    	)
    	from $configurations
    then
    	modify($o) { setUsage("done") }
    	modify($c) { setConsidered(false) }
end

rule "UsagePass" 
	salience (8) 
    when
        $i: InputRecommendation($usage: configurationUsageType.getUsage())
        $o: Output(recommendedConfigurations.isEmpty(), usage == null, characteristics == null, budget == "done", type == "done")
        $requirements: ConfigurationUsageTypeRequirements(usage.getUsage() == $usage)
        $configurations: List() from collect(Configuration(considered == true))
        Configuration(
    		$c:this, this.getCPU() memberOf $requirements.getCPU() || $requirements.getCPU().isEmpty(), this.getGPU() memberOf $requirements.getGPU() || $requirements.getGPU().isEmpty(), this.getRAM() memberOf $requirements.getRAM() || $requirements.getRAM().isEmpty(), this.getOS() memberOf $requirements.getOS() || $requirements.getOS().isEmpty(), this.getPSU() memberOf $requirements.getPSU() || $requirements.getPSU().isEmpty(), this.getDiscType() memberOf $requirements.getDiscType() || $requirements.getDiscType().isEmpty(), this.getDiscSize() memberOf $requirements.getDiscSize() || $requirements.getDiscSize().isEmpty(), this.getMotherboard() memberOf $requirements.getMotherboard() || $requirements.getMotherboard().isEmpty(), this.getScreenSize() memberOf $requirements.getScreenSize() || $requirements.getScreenSize().isEmpty(), this.getScreenResolution() memberOf $requirements.getScreenResolution() || $requirements.getScreenResolution().isEmpty(), this.getMusicCard() memberOf $requirements.getMusicCard() || $requirements.getMusicCard().isEmpty(), this.isTouchscreen() memberOf $requirements.getTouchscreen() || $requirements.getTouchscreen().isEmpty(), this.isMicrophone() memberOf $requirements.getMicrophone() || $requirements.getMicrophone().isEmpty(), this.isCamera() memberOf $requirements.getCamera() || $requirements.getCamera().isEmpty(), this.isErgonomic() memberOf $requirements.getErgonomic() || $requirements.getErgonomic().isEmpty()
    	)
    	from $configurations
    then
    	modify($o) { setUsage("done") }
end




